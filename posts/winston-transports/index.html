<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Winston Transports?? | celeronCoder's Blog</title><meta name=keywords content="webdev,winston,logging,custom"><meta name=description content="Brief intro to winston transports and how to create custom ones."><meta name=author content><link rel=canonical href=https://celeroncoder.github.io/blog/posts/winston-transports/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.d7fb4cbf980fe688a21621b06a795933c4e6bb2d4070ec940667af1715d84af2.css integrity="sha256-1/tMv5gP5oiiFiGwanlZM8Tmuy1AcOyUBmevFxXYSvI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://raw.githubusercontent.com/gist/celeronCoder/bf4dbcc95f3919e2b374dc60b0c01391/raw/efe5fe3f1cfad1dd862fdbefd760f1815c6d2a1a/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://celeroncoder.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://celeroncoder.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://celeroncoder.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://celeroncoder.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Winston Transports??"><meta property="og:description" content="Brief intro to winston transports and how to create custom ones."><meta property="og:type" content="article"><meta property="og:url" content="https://celeroncoder.github.io/blog/posts/winston-transports/"><meta property="og:image" content="https://celeroncoder.github.io/blog/uploads/winston-transport-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-06T18:30:00+00:00"><meta property="article:modified_time" content="2022-09-06T18:30:00+00:00"><meta property="og:site_name" content="celeronCoder"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://celeroncoder.github.io/blog/uploads/winston-transport-cover.png"><meta name=twitter:title content="Winston Transports??"><meta name=twitter:description content="Brief intro to winston transports and how to create custom ones."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://celeroncoder.github.io/blog/posts/"},{"@type":"ListItem","position":3,"name":"Winston Transports??","item":"https://celeroncoder.github.io/blog/posts/winston-transports/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Winston Transports??","name":"Winston Transports??","description":"Brief intro to winston transports and how to create custom ones.","keywords":["webdev","winston","logging","custom"],"articleBody":"Brief Introduction to what is winston? Winston is a node package that provides a simple and universal logging library. It supports multiple transports, such as file, console, and syslog. Winston is easy to use and can be customized to meet your specific needs.\nDid you see the words multiple transports and customized in the above definition of winston (that I asked Google Bard to write)? Yeah, winston is probable the most sophisticated and customizable logger out there.\nWhat are transports? So we know that winston supports multiple transports, but what is a transport anyway?\nIn winston, transport is essentially a storage device for your logs. Each instance of a winston logger can have multiple transports configured at different levels.\nSo transport is basically like where you want to store your logs.\nThere are some most basic ones like:\nThe Console\nimport winston from \"winston\" export const logger = winston.createLogger( { transports: [ new winston.transports.Console() ], } ) Files\n... new winston.transports.File({ filename: \"logs/all.log\" }) ... Console and file are like the most basic ones, Console basically prints your logs to the console and file one just stores your log in the defined file. You can go crazy with the options and do a lot more stuff, like storing logs of only a specific level, let’s say error or something.\nThe default ones are great, and they make for the most basic use cases, but if you’re going into production and logs are just more than something you’ll use to debug and get HTTP status codes.\nThere are a lot of platforms that allows you to store your logs and do crazy things with them (basically alerts and analytics). Some of them are Logtail, and an open source one is Highstorm.\nTo upload your logs to them, you’ll need custom transport. winston give you the power to create custom transports pretty easily with the winston-transport package, and here’s how you do it…\nCustom Transports So basically custom transports are to upload your logs to some sort of storage or maybe do something else with it, like creating alerts and stuff.\nHere’s how you create basic custom transport for winston:\n// my-transport.ts import Transport, { TransportStreamOptions } 'winston-transport'; import type { LogEntry } from \"winston\"; export class MyTransport extends Transport { constructor( opts: TransportStreamOptions ) { super(opts); /* * Consume any custom options here. e.h: * Connection information for databases * Authentication information for APIs */ } // this functions run when something is logged so here's where you can add you custom logic to do stuff when something is logged. log(info: LogEntry, callback: any) { // make sure you installed `@types/node` or this will give a typerror // this is the basic default behavior don't forget to add this. setImmediate(() =\u003e { this.emit(\"logged\", info); }); const { level, message, ...meta } = info; // here you can add your custom logic, e.g. ingest data into database etc. // don't forget this one callback(); } } Now you can add your custom transport very easily as:\n// logger.ts import {MyTransport} from \"./my-transport.ts\" const options = { // custom transport options } const myTransport = new MyTransport(options) export const logger = winston.createLogger({ ... transports: [ ... mytransport, ... ] }); Pretty easy to write, yup, thanks to winston being the best logger out there with this level of customization. With the above example, you can create any custom transport you want with whatever fancy logic you want.\nCheck out these to dive deeper:\nnpm: winston-transport\nnpm: winston\nHere are some packages that provide transports to do various things (mostly upload to their service):\nnpm: @logtail/winston\nnpm: winston-transport-sentry-node\nnpm: winston-kafka-transport\nnpm: @shelf/winston-datadog-logs-transport\n","wordCount":"608","inLanguage":"en","image":"https://celeroncoder.github.io/blog/uploads/winston-transport-cover.png","datePublished":"2022-09-06T18:30:00Z","dateModified":"2022-09-06T18:30:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://celeroncoder.github.io/blog/posts/winston-transports/"},"publisher":{"@type":"Organization","name":"celeronCoder's Blog","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/gist/celeronCoder/bf4dbcc95f3919e2b374dc60b0c01391/raw/efe5fe3f1cfad1dd862fdbefd760f1815c6d2a1a/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://celeroncoder.github.io/blog accesskey=h title="celeronCoder's Blog (Alt + H)">celeronCoder's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://celeroncoder.github.io/blog>Home</a>&nbsp;»&nbsp;<a href=https://celeroncoder.github.io/blog/posts/>Posts</a></div><h1 class=post-title>Winston Transports??</h1><div class=post-description>Brief intro to winston transports and how to create custom ones.</div><div class=post-meta><span title='2022-09-06 18:30:00 +0000 UTC'>September 6, 6030</span>&nbsp;·&nbsp;3 min</div></header><figure class=entry-cover><img loading=lazy src=https://celeroncoder.github.io/blog/uploads/winston-transport-cover.png alt="winston transport blog post cover"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#brief-introduction-to-what-is-winston>Brief Introduction to what is <code>winston</code>?</a></li><li><a href=#what-are-transports>What are transports?</a></li><li><a href=#custom-transports>Custom Transports</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=brief-introduction-to-what-is-winston>Brief Introduction to what is <code>winston</code>?<a hidden class=anchor aria-hidden=true href=#brief-introduction-to-what-is-winston>#</a></h3><blockquote><p>Winston is a node package that provides a simple and universal logging library. It supports <strong>multiple transports</strong>, such as file, console, and syslog. Winston is easy to use and can be <strong>customized</strong> to meet your specific needs.</p></blockquote><p>Did you see the words <code>multiple transports</code> and <code>customized</code> in the above definition of <code>winston</code> (that I asked Google Bard to write)? Yeah, <code>winston</code> is probable the most sophisticated and customizable logger out there.</p><h3 id=what-are-transports>What are transports?<a hidden class=anchor aria-hidden=true href=#what-are-transports>#</a></h3><p>So we know that <code>winston</code> supports multiple transports, but what is a transport anyway?</p><blockquote><p>In <code>winston</code>, transport is essentially a storage device for your logs. Each instance of a <code>winston</code> logger can have multiple transports configured at different levels.</p></blockquote><p>So transport is basically like where you want to store your logs.</p><p>There are some most basic ones like:</p><ul><li><p><strong>The Console</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>winston</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;winston&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>logger</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>createLogger</span>(
</span></span><span style=display:flex><span>	{ 
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>transports</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>transports</span>.<span style=color:#a6e22e>Console</span>()
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>)
</span></span></code></pre></div></li><li><p><strong>Files</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#66d9ef>new</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>transports</span>.<span style=color:#a6e22e>File</span>({ <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;logs/all.log&#34;</span> })
</span></span><span style=display:flex><span>...
</span></span></code></pre></div></li></ul><p>Console and file are like the most basic ones, Console basically prints your logs to the console and file one just stores your log in the defined file. You can go crazy with the options and do a lot more stuff, like storing logs of only a specific <code>level</code>, let’s say <code>error</code> or something.</p><p>The default ones are great, and they make for the most basic use cases, but if you’re going into production and logs are just more than something you’ll use to debug and get HTTP status codes.</p><p>There are a lot of platforms that allows you to store your logs and do crazy things with them (basically alerts and analytics). Some of them are <a href=https://betterstack.com/logtail>Logtail</a>, and an open source one is <a href=https://highstorm.app>Highstorm</a>.</p><p>To upload your logs to them, you’ll need custom transport. <code>winston</code> give you the power to create custom transports pretty easily with the <code>winston-transport</code> package, and here’s how you do it…</p><h3 id=custom-transports>Custom Transports<a hidden class=anchor aria-hidden=true href=#custom-transports>#</a></h3><p>So basically custom transports are to upload your logs to some sort of storage or maybe do something else with it, like creating alerts and stuff.</p><p>Here’s how you create basic custom transport for <code>winston</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#75715e>// my-transport.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Transport</span>, { <span style=color:#a6e22e>TransportStreamOptions</span> } <span style=color:#e6db74>&#39;winston-transport&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#66d9ef>type</span> { <span style=color:#a6e22e>LogEntry</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;winston&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyTransport</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Transport</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>opts</span>: <span style=color:#66d9ef>TransportStreamOptions</span>
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>opts</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>			* Consume any custom options here. e.h:
</span></span></span><span style=display:flex><span><span style=color:#75715e>				* Connection information for databases
</span></span></span><span style=display:flex><span><span style=color:#75715e>				* Authentication information for APIs
</span></span></span><span style=display:flex><span><span style=color:#75715e>		*/</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// this functions run when something is logged so here&#39;s where you can add you custom logic to do stuff when something is logged.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>info</span>: <span style=color:#66d9ef>LogEntry</span>, <span style=color:#a6e22e>callback</span>: <span style=color:#66d9ef>any</span>) {
</span></span><span style=display:flex><span>		<span style=color:#75715e>// make sure you installed `@types/node` or this will give a typerror
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// this is the basic default behavior don&#39;t forget to add this.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#a6e22e>setImmediate</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>emit</span>(<span style=color:#e6db74>&#34;logged&#34;</span>, <span style=color:#a6e22e>info</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>level</span>, <span style=color:#a6e22e>message</span>, ...<span style=color:#a6e22e>meta</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>info</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// here you can add your custom logic, e.g. ingest data into database etc.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// don&#39;t forget this one
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#a6e22e>callback</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now you can add your custom transport very easily as:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#75715e>// logger.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MyTransport</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./my-transport.ts&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>options</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// custom transport options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>myTransport</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MyTransport</span>(<span style=color:#a6e22e>options</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>logger</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>createLogger</span>({
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>transports</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>		...
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>mytransport</span>,
</span></span><span style=display:flex><span>		...
</span></span><span style=display:flex><span>	]
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Pretty easy to write, yup, thanks to <code>winston</code> being the best logger out there with this level of customization. With the above example, you can create any custom transport you want with whatever fancy logic you want.</p><p>Check out these to dive deeper:</p><p><a href=https://www.npmjs.com/package/winston-transport>npm: winston-transport</a></p><p><a href=https://www.npmjs.com/package/winston>npm: winston</a></p><p>Here are some packages that provide transports to do various things (mostly upload to their service):</p><p><a href=https://www.npmjs.com/package/@logtail/winston>npm: @logtail/winston</a></p><p><a href=https://www.npmjs.com/package/winston-transport-sentry-node>npm: winston-transport-sentry-node</a></p><p><a href=https://www.npmjs.com/package/winston-kafka-transport>npm: winston-kafka-transport</a></p><p><a href=https://www.npmjs.com/package/@shelf/winston-datadog-logs-transport>npm: @shelf/winston-datadog-logs-transport</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://celeroncoder.github.io/blog/tags/webdev/>webdev</a></li><li><a href=https://celeroncoder.github.io/blog/tags/winston/>winston</a></li><li><a href=https://celeroncoder.github.io/blog/tags/logging/>logging</a></li><li><a href=https://celeroncoder.github.io/blog/tags/custom/>custom</a></li></ul><nav class=paginav><a class=prev href=https://celeroncoder.github.io/blog/posts/italic-fonts/><span class=title>« Prev</span><br><span>Italic Fonts</span></a>
<a class=next href=https://celeroncoder.github.io/blog/posts/rest-with-rust/><span class=title>Next »</span><br><span>REST with Rust</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://celeroncoder.github.io/blog>celeronCoder's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>